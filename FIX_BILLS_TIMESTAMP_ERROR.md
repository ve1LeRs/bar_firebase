# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –≤ —Å—á–µ—Ç–∞—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞:
```
FirebaseError: Function addDoc() called with invalid data. 
FieldValue.serverTimestamp() is not currently supported inside arrays 
(found in document bills/ekAyRpThUSplgLkytkzt)
```

## –ü—Ä–∏—á–∏–Ω–∞

Firebase Firestore **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FieldValue.serverTimestamp()` –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–æ–≤. 

–í –∫–æ–¥–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—á–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `serverTimestamp()` –¥–ª—è –ø–æ–ª—è `timestamp` –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ `billItem`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–ª—Å—è –≤ –º–∞—Å—Å–∏–≤ `items`:

```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
const billItem = {
  orderId: orderId,
  cocktailName: orderData.name,
  timestamp: firebase.firestore.FieldValue.serverTimestamp(), // –û—à–∏–±–∫–∞!
  // ...
};

await db.collection('bills').add({
  items: [billItem], // serverTimestamp() –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–∞
  // ...
});
```

## –†–µ—à–µ–Ω–∏–µ

–ó–∞–º–µ–Ω–∏—Ç—å `serverTimestamp()` –Ω–∞ `new Date()` –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–æ–≤:

```javascript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
const billItem = {
  orderId: orderId,
  cocktailName: orderData.name,
  timestamp: new Date(), // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π Date –æ–±—ä–µ–∫—Ç
  // ...
};

await db.collection('bills').add({
  items: [billItem], // –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
  createdAt: firebase.firestore.FieldValue.serverTimestamp(), // –≠—Ç–æ –û–ö - –Ω–µ –≤ –º–∞—Å—Å–∏–≤–µ
  updatedAt: firebase.firestore.FieldValue.serverTimestamp(), // –≠—Ç–æ –û–ö - –Ω–µ –≤ –º–∞—Å—Å–∏–≤–µ
  // ...
});
```

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–§–∞–π–ª:** `script.js`  
**–°—Ç—Ä–æ–∫–∞:** 2538

**–ë—ã–ª–æ:**
```javascript
timestamp: firebase.firestore.FieldValue.serverTimestamp(),
```

**–°—Ç–∞–ª–æ:**
```javascript
timestamp: new Date(), // –ò—Å–ø–æ–ª—å–∑—É–µ–º new Date() –≤–º–µ—Å—Ç–æ serverTimestamp() –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞
```

## –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å

### –ì–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å serverTimestamp():
‚úÖ –í –ø–æ–ª—è—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
```javascript
{
  createdAt: firebase.firestore.FieldValue.serverTimestamp(), // –û–ö
  updatedAt: firebase.firestore.FieldValue.serverTimestamp(), // –û–ö
  items: [...]
}
```

### –ì–¥–µ –ù–ï–õ–¨–ó–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å serverTimestamp():
‚ùå –í–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–æ–≤
```javascript
{
  items: [
    {
      timestamp: firebase.firestore.FieldValue.serverTimestamp() // –û–®–ò–ë–ö–ê!
    }
  ]
}
```

‚ùå –í–Ω—É—Ç—Ä–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–∞—Ö
```javascript
{
  items: [
    {
      data: {
        timestamp: firebase.firestore.FieldValue.serverTimestamp() // –û–®–ò–ë–ö–ê!
      }
    }
  ]
}
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏–º–µ–Ω–Ω–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞, –º–æ–∂–Ω–æ:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `new Date()`** (—Ç–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ)
   - –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

2. **–í—ã–Ω–µ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É –∏–∑ –º–∞—Å—Å–∏–≤–∞**
   - –•—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `itemsTimestamp` –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `serverTimestamp()` –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è

3. **–°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã**
   - –í–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—é
   - –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç - –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å `serverTimestamp()`

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. ‚úÖ –°—á–µ—Ç–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
3. ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—á–µ—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, –≥–¥–µ:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∞—Å—Å–∏–≤—ã –≤ Firestore
- –í–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–æ–≤ –µ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FieldValue.serverTimestamp()`

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `new Date()` –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–æ–≤!

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** ‚úÖ  
**–î–∞—Ç–∞:** 2025-10-08  
**–í–µ—Ä—Å–∏—è:** 1.0

